<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="noodl-app.png">
    <title>Noodl Viewer</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            user-select: none;
            background-color: black;
        }

        img {
            -webkit-user-drag: none;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: rgba(0,0,0,0);
            cursor: default;
        }

    </style>
</head>
<body>
<noscript>
    You need to enable JavaScript to run this app.
</noscript>

<div id="root" style="display: flex; width:100vw; height: 100vh; overflow: hidden"></div>

<script src="react.production.min.js"></script>
<script src="react-dom.production.min.js"></script>



<script type="application/javascript">
    window.__noodl_modules = [];
    window.Noodl = {
        defineModule:function(m) {
            window.__noodl_modules.push(m);
        }
    }
    window.projectData = {"settings":{},"components":[{"name":"/Main","nodes":[{"id":"eacc74e7-4dce-2baf-354b-8070e2b2b872","type":"Group","parameters":{"backgroundColor":"#E8423A","mounted":true},"ports":[{"name":"width","type":{"name":"number","units":["%","px","vw"],"defaultUnit":"%"},"plug":"input","group":"Dimensions","displayName":"Width","default":"100","index":2},{"name":"height","type":{"name":"number","units":["%","px","vh"],"defaultUnit":"%"},"plug":"input","group":"Dimensions","displayName":"Height","default":"100","index":3},{"name":"borderWidth","type":{"name":"number","units":["px"],"defaultUnit":"px"},"plug":"input","group":"Style","displayName":"Border Width","default":0,"index":353},{"name":"borderColor","type":"color","plug":"input","group":"Style","displayName":"Border Color","index":354}],"children":[{"id":"8f3d9ac5-0f59-56c1-9de1-40422004db8c","type":"Circle","parameters":{"position":"absolute","alignX":"center","alignY":"center","size":200,"fillColor":"#02E8F0","marginTop":{"value":0,"unit":"px"}},"ports":[],"children":[]},{"id":"40fb0c0f-a379-147d-c85d-6f949eb25031","type":"Text","parameters":{"sizeMode":"contentSize","alignX":"center","alignY":"center","text":"Hello","color":"#171717","fontFamily":"Arial","position":"absolute","fontSize":{"value":30,"unit":"px"}},"ports":[],"children":[]},{"id":"81aaf33e-0e4e-5d37-54b1-60c26f27f2d5","type":"Video","parameters":{"src":"come-on-1.wav","loop":false,"reset":false,"play":false,"sizeMode":"explicit","width":{"value":2,"unit":"px"},"height":{"value":2,"unit":"px"}},"ports":[{"name":"width","type":{"name":"number","units":["%","px","vw"],"defaultUnit":"%"},"plug":"input","group":"Dimensions","displayName":"Width","default":"100","index":2},{"name":"height","type":{"name":"number","units":["%","px","vh"],"defaultUnit":"%"},"plug":"input","group":"Dimensions","displayName":"Height","default":"100","index":3}],"children":[]}]},{"id":"b850bea6-938a-e1ec-6fb2-d6d8cf9b71e8","type":"Script Downloader","parameters":{"input 0":"ongaq.js"},"ports":[{"name":"input 0","displayName":"Script 0","type":"string","plug":"input","group":"External scripts","index":2},{"name":"input 1","displayName":"Script 1","type":"string","plug":"input","group":"External scripts","index":3}],"children":[]},{"id":"51d948b5-68c8-30ca-10d7-fc751967d906","type":"Javascript2","parameters":{"code":"\ndefine({\n\t// The input ports of the Javascript node, name of input and type\n\tinputs:{\n\t    // ExampleInput:'number',\n\t    // Available types are 'number', 'string', 'boolean', 'color' and 'signal',\n\t    scriptLoaded:'signal',\n\t    tap:'signal',\n\t    state: 'string',\n\t    level1: 'signal',\n\t    level2: 'signal',\n\t    level3: 'signal',\n\t    meantime: 'number'\n\t},\n\t\n\t// The output ports of the Javascript node, name of output and type\n\toutputs:{\n\t    // ExampleOutput:'string',\n\t    lap: \"signal\",\n\t    meantime:\"number\"\n\t},\n\t\n\t// All signal inputs need their own function with the corresponding name that\n\t// will be run when a signal is received on the input.\n\tscriptLoaded:function(inputs,outputs) {\n\t\t// ...\n\t\t\n        const ongaq = new Ongaq ({\n            api_key: \"5066926a2729434f9d8c1eb715448971\",\n            volume: 100,\n            bpm: 120,\n            onReady: ()=>{\n                ongaq.start();\n                \n                my_drums.willMakeLap = ({ nextLap, meanTime })=>{\n                    outputs.meantime = meanTime;\n                    this.flagOutputDirty(\"meantime\");\n                    this.sendSignalOnOutput(\"lap\");\n                }\n                \n                Noodl.eventEmitter.on(\"Tap\", function(eventData) {\n                    if(inputs.state == \"play\"){\n                        ongaq.start();\n                    }else{\n                        ongaq.pause();\n                    }\n                    \n                });\n                \n                Noodl.eventEmitter.on(\"level1\", function(eventData) {\n                    ongaq.add( my_synth );\n                    \n                });\n                Noodl.eventEmitter.on(\"level2\", function(eventData) {\n                    ongaq.add( my_drums2 );\n                    \n                });\n                \n                Noodl.eventEmitter.on(\"level3\", function(eventData) {\n                   ongaq.add( my_trumpet );\n                });\n            }\n        })\n        \n        const my_drums = new Part ({\n            sound: \"small_cube_drums\"\n        })\n        \n        const my_synth = new Part ({\n                        sound: \"plain_keyboard\",\n                        measure: 1\n                    })\n        \n        const my_drums2 = new Part ({\n            sound: \"my_band_drums\"\n        })\n        \n        const my_trumpet = new Part ({\n            sound: \"trumpet\"\n        })\n        \n        my_drums.add( \n            new Filter ({\n            key: \"kick\",\n            active: beat => beat % 8 === 0\n        }))\n        \n        my_drums.add(\n        \tnew Filter ({\n        \t\tkey: \"hihat\",\n        \t\tactive: n => n % 16 === 4\n        \t})\n        )\n        \n        my_drums.add(\n        \tnew Filter ({\n        \t\tkey: \"tom2\",\n        \t\tactive: n => n % 16 === 4 ||n % 16 === 6 ||n % 16 === 8\n        }))\n        \n        my_drums.add( \n            new Filter ({\n            key: \"kick\",\n            active: beat => beat % 8 === 0\n        }))\n        \n        my_synth.add( \n            new Filter ({\n        \tkey: [ \"A2\", \"D2\"],\n        \tlength: 2,\n        \tactive: (beat, measure) => beat % 16 === 0 && measure === 0 || beat % 16 === 6 && measure === 0 || beat % 16 === 12 && measure === 0\n        }))\n\n        my_drums2.add( \n            new Filter ({\n            key: \"snare\",\n            active: beat => beat % 8 === 4\n        }))\n        \n        my_drums2.add( \n            new Filter ({\n            key: \"cymbal\",\n            active: beat => beat % 16 === 0\n        }))\n  \n        my_trumpet.add( new Filter ({\n        \tkey: [ \"G3\",\"G4\",\"G5\",\"G6\"],\n        \tlength: 16,\n        \tactive: (beat, measure) => beat % 16 === 0 && measure === 0\n        }))\n        \n        ongaq.add( my_drums );\n        \n        \n\t},\n\t\n\ttap:function(inputs,outputs) {\n\t    Noodl.eventEmitter.emit(\"Tap\");\n\t},\n\tlevel1:function(inputs,outputs) {\n\t    Noodl.eventEmitter.emit(\"level1\");\n\t},\n\tlevel2:function(inputs,outputs) {\n\t    Noodl.eventEmitter.emit(\"level2\");\n\t},\n\tlevel3:function(inputs,outputs) {\n\t    Noodl.eventEmitter.emit(\"level3\");\n\t},\n\t\n\t// This function will be called when any of the inputs have changed\n\tchange:function(inputs,outputs) {\n\t\t// ...\n\t}\n})\n","useExternalFile":"no","volume":100},"ports":[{"name":"code","type":{"name":"string","allowEditOnly":true,"codeeditor":"javascript"},"plug":"input","group":"Code","displayName":"Code","default":"define({\n\t// The input ports of the Javascript node, name of input and type\n\tinputs:{\n\t    // ExampleInput:'number',\n\t    // Available types are 'number', 'string', 'boolean', 'color' and 'signal',\n\t    mySignal:'signal',\n\t},\n\t\n\t// The output ports of the Javascript node, name of output and type\n\toutputs:{\n\t    // ExampleOutput:'string',\n\t},\n\t\n\t// All signal inputs need their own function with the corresponding name that\n\t// will be run when a signal is received on the input.\n\tmySignal:function(inputs,outputs) {\n\t\t// ...\n\t},\n\t\n\t// This function will be called when any of the inputs have changed\n\tchange:function(inputs,outputs) {\n\t\t// ...\n\t}\n})\n","index":1},{"name":"scriptLoaded","plug":"input","type":{"name":"signal"},"group":"Inputs","index":2},{"name":"tap","plug":"input","type":{"name":"signal"},"group":"Inputs","index":3},{"name":"state","plug":"input","type":{"name":"string"},"group":"Inputs","index":4},{"name":"level1","plug":"input","type":{"name":"signal"},"group":"Inputs","index":5},{"name":"level2","plug":"input","type":{"name":"signal"},"group":"Inputs","index":6},{"name":"level3","plug":"input","type":{"name":"signal"},"group":"Inputs","index":7},{"name":"meantime","plug":"input","type":{"name":"number"},"group":"Inputs","index":8},{"name":"lap","type":{"name":"signal"},"plug":"output","group":"Outputs","index":9},{"name":"meantime","type":{"name":"number"},"plug":"output","group":"Outputs","index":10}],"children":[]},{"id":"f14b5a93-5ad9-724d-f4a8-80ebf8a0bd7b","type":"States","parameters":{"states":"play,pause","startState":"pause","duration-pause":0,"duration-play":0},"ports":[{"plug":"input","type":{"name":"enum","enums":[{"value":"easeOut","label":"Ease Out"},{"value":"easeIn","label":"Ease In"},{"value":"linear","label":"Linear"},{"value":"easeInOut","label":"Ease In Out"},{"value":"cubicBezier","label":"Cubic Bezier"}]},"default":"easeOut","displayName":"Easing Curve","group":"play Transition","name":"transition-play","index":6},{"plug":"input","type":"number","default":300,"displayName":"Duration","group":"play Transition","name":"duration-play","index":7},{"plug":"input","type":{"name":"boolean","allowConnectionsOnly":true},"displayName":"To play","name":"to-play","group":"Go to state","index":8},{"plug":"output","type":"boolean","displayName":"At play","name":"at-play","group":"Current state","index":9},{"plug":"output","type":"signal","displayName":"Has Reached play","name":"reached-play","group":"Current state","index":10},{"plug":"input","type":{"name":"enum","enums":[{"value":"easeOut","label":"Ease Out"},{"value":"easeIn","label":"Ease In"},{"value":"linear","label":"Linear"},{"value":"easeInOut","label":"Ease In Out"},{"value":"cubicBezier","label":"Cubic Bezier"}]},"default":"easeOut","displayName":"Easing Curve","group":"pause Transition","name":"transition-pause","index":11},{"plug":"input","type":"number","default":300,"displayName":"Duration","group":"pause Transition","name":"duration-pause","index":12},{"plug":"input","type":{"name":"boolean","allowConnectionsOnly":true},"displayName":"To pause","name":"to-pause","group":"Go to state","index":13},{"plug":"output","type":"boolean","displayName":"At pause","name":"at-pause","group":"Current state","index":14},{"plug":"output","type":"signal","displayName":"Has Reached pause","name":"reached-pause","group":"Current state","index":15},{"plug":"input","type":{"name":"enum","enums":["play","pause"]},"group":"States","displayName":"Start at","name":"startState","default":"play","index":16}],"children":[]},{"id":"114d41e7-260c-11b8-3e6a-5fc7673d3da4","type":"States","parameters":{"states":"big,small","values":"siz","startState":"small","value-big-siz":200,"value-small-siz":180,"duration-small":250,"duration-big":250},"ports":[{"type":{"name":"number","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"siz","index":6},{"plug":"input","type":"number","group":"big Values","name":"value-big-siz","displayName":"siz","editorName":"big|siz","index":7},{"plug":"input","type":{"name":"enum","enums":[{"value":"easeOut","label":"Ease Out"},{"value":"easeIn","label":"Ease In"},{"value":"linear","label":"Linear"},{"value":"easeInOut","label":"Ease In Out"},{"value":"cubicBezier","label":"Cubic Bezier"}]},"default":"easeOut","displayName":"Easing Curve","group":"big Transition","name":"transition-big","index":8},{"plug":"input","type":"number","default":300,"displayName":"Duration","group":"big Transition","name":"duration-big","index":9},{"plug":"input","type":{"name":"boolean","allowConnectionsOnly":true},"displayName":"To big","name":"to-big","group":"Go to state","index":10},{"plug":"output","type":"boolean","displayName":"At big","name":"at-big","group":"Current state","index":11},{"plug":"output","type":"signal","displayName":"Has Reached big","name":"reached-big","group":"Current state","index":12},{"plug":"input","type":"number","group":"small Values","name":"value-small-siz","displayName":"siz","editorName":"small|siz","index":13},{"plug":"input","type":{"name":"enum","enums":[{"value":"easeOut","label":"Ease Out"},{"value":"easeIn","label":"Ease In"},{"value":"linear","label":"Linear"},{"value":"easeInOut","label":"Ease In Out"},{"value":"cubicBezier","label":"Cubic Bezier"}]},"default":"easeOut","displayName":"Easing Curve","group":"small Transition","name":"transition-small","index":14},{"plug":"input","type":"number","default":300,"displayName":"Duration","group":"small Transition","name":"duration-small","index":15},{"plug":"input","type":{"name":"boolean","allowConnectionsOnly":true},"displayName":"To small","name":"to-small","group":"Go to state","index":16},{"plug":"output","type":"boolean","displayName":"At small","name":"at-small","group":"Current state","index":17},{"plug":"output","type":"signal","displayName":"Has Reached small","name":"reached-small","group":"Current state","index":18},{"plug":"input","type":{"name":"enum","enums":["big","small"]},"group":"States","displayName":"Start at","name":"startState","default":"big","index":19}],"children":[]},{"id":"fb271caf-27fd-c43c-b291-374e025a9c04","type":"Counter","parameters":{},"ports":[],"children":[]},{"id":"bdb2e554-c055-b083-9ae3-da84462ff96a","type":"Timer","parameters":{"duration":1},"ports":[],"children":[]},{"id":"894175d4-4ebb-2929-431d-00d2e2c2439e","type":"Timer","parameters":{"duration":500},"ports":[],"children":[]},{"id":"9848c990-03ba-47fe-68d2-201f2da09ee2","type":"/AccMicrobit","parameters":{},"ports":[],"children":[]},{"id":"d725f920-458b-600a-2856-04c33c5ac76d","type":"Counter","parameters":{},"ports":[],"children":[]},{"id":"590392cf-bf8a-0a96-7bb4-f9af15707e8a","type":"Javascript2","parameters":{"code":"define({\n\t// The input ports of the Javascript node, name of input and type\n\tinputs:{\n\t    // ExampleInput:'number',\n\t    // Available types are 'number', 'string', 'boolean', 'color' and 'signal',\n\t    mySignal:'signal',\n\t    accX:'number'\n\t},\n\t\n\t// The output ports of the Javascript node, name of output and type\n\toutputs:{\n\t    // ExampleOutput:'string',\n\t    count:\"boolean\"\n\t},\n\t\n\t// All signal inputs need their own function with the corresponding name that\n\t// will be run when a signal is received on the input.\n\tmySignal:function(inputs,outputs) {\n\t\t// ...\n\t\tthis.previousValue = 0;\n\t},\n\t\n\t// This function will be called when any of the inputs have changed\n\tchange:function(inputs,outputs) {\n\t\t// ...\n\t\tconsole.log(this.previousValue, inputs.accX);\n\t\t\n\t\tif(Math.abs(inputs.accX - this.previousValue) >20 && inputs.accX <25){\n\t\t    console.log(\"ここ\");\n\t\t    this.sendSignalOnOutput(\"count\");\n\t\t    this.previousValue = inputs.accX;\n\t\t}\n\t\t\n\t}\n})\n"},"ports":[{"name":"code","type":{"name":"string","allowEditOnly":true,"codeeditor":"javascript"},"plug":"input","group":"Code","displayName":"Code","default":"define({\n\t// The input ports of the Javascript node, name of input and type\n\tinputs:{\n\t    // ExampleInput:'number',\n\t    // Available types are 'number', 'string', 'boolean', 'color' and 'signal',\n\t    mySignal:'signal',\n\t},\n\t\n\t// The output ports of the Javascript node, name of output and type\n\toutputs:{\n\t    // ExampleOutput:'string',\n\t},\n\t\n\t// All signal inputs need their own function with the corresponding name that\n\t// will be run when a signal is received on the input.\n\tmySignal:function(inputs,outputs) {\n\t\t// ...\n\t},\n\t\n\t// This function will be called when any of the inputs have changed\n\tchange:function(inputs,outputs) {\n\t\t// ...\n\t}\n})\n","index":1},{"name":"mySignal","plug":"input","type":{"name":"signal"},"group":"Inputs","index":2},{"name":"accX","plug":"input","type":{"name":"number"},"group":"Inputs","index":3},{"name":"count","type":{"name":"boolean"},"plug":"output","group":"Outputs","index":4}],"children":[]},{"id":"93948317-75a4-fb2e-5950-f61300c49d0d","type":"Application Events","parameters":{},"ports":[],"children":[]},{"id":"8fd824ac-fa19-3082-084e-587d024d9353","type":"Switch","parameters":{},"ports":[],"children":[]},{"id":"0914932c-cf14-6d4b-eec1-331abd1f20a3","type":"Expression","parameters":{"expression":"num > 50"},"ports":[{"name":"num","type":"number","plug":"input","index":2}],"children":[]},{"id":"c62ddefa-fd9b-0655-bbe4-f5c77ff5ff93","type":"Switch","parameters":{},"ports":[],"children":[]},{"id":"f90ba713-ff5b-10e3-e20b-0766530a41cf","type":"Expression","parameters":{"expression":"num > 100"},"ports":[{"name":"num","type":"number","plug":"input","index":2}],"children":[]},{"id":"274db519-7ede-dc51-b1ff-3ef1edd0f8b5","type":"Switch","parameters":{},"ports":[],"children":[]},{"id":"5f0d6b9a-3c1c-8e4b-6d4a-35ce7228b369","type":"Expression","parameters":{"expression":"num > 150"},"ports":[{"name":"num","type":"number","plug":"input","index":2}],"children":[]},{"id":"502d31cd-13ac-36b0-3c00-0574cae3d2a7","type":"Group","parameters":{"flexDirection":"row","sizeMode":"contentSize","alignX":"center","alignY":"bottom","position":"absolute","marginBottom":{"value":20,"unit":"px"}},"ports":[{"name":"borderWidth","type":{"name":"number","units":["px"],"defaultUnit":"px"},"plug":"input","group":"Style","displayName":"Border Width","default":0,"index":353},{"name":"borderColor","type":"color","plug":"input","group":"Style","displayName":"Border Color","index":354}],"children":[{"id":"1abc2f51-613a-26af-783c-560da81918a0","type":"Circle","parameters":{"marginRight":{"value":10,"unit":"px"}},"ports":[],"children":[]},{"id":"29f74ce1-16b0-235e-6fe9-1779c426e0d5","type":"Circle","parameters":{},"ports":[],"children":[]},{"id":"ed81d105-df22-6000-00f9-982709b140e3","type":"Circle","parameters":{"marginLeft":{"value":9,"unit":"px"}},"ports":[],"children":[]}]},{"id":"a5bb277c-fae4-656e-d650-024866966212","type":"Counter","parameters":{},"ports":[],"children":[]},{"id":"eab09069-373d-3981-0f7c-448205280dd0","type":"Expression","parameters":{"expression":"count%4 == 0"},"ports":[{"name":"count","type":"number","plug":"input","index":2}],"children":[]},{"id":"e33264cb-8d2c-893e-0d6c-6aab44df2ff9","type":"Text","parameters":{"color":"#FFFFFF"},"ports":[{"name":"width","type":{"name":"number","units":["%","px","vw"],"defaultUnit":"%"},"plug":"input","group":"Dimensions","displayName":"Width","default":"100","index":2}],"children":[]}],"connections":[{"sourceId":"40fb0c0f-a379-147d-c85d-6f949eb25031","sourcePort":"onClick","targetId":"f14b5a93-5ad9-724d-f4a8-80ebf8a0bd7b","targetPort":"toggle"},{"sourceId":"f14b5a93-5ad9-724d-f4a8-80ebf8a0bd7b","sourcePort":"currentState","targetId":"51d948b5-68c8-30ca-10d7-fc751967d906","targetPort":"state"},{"sourceId":"f14b5a93-5ad9-724d-f4a8-80ebf8a0bd7b","sourcePort":"stateChanged","targetId":"51d948b5-68c8-30ca-10d7-fc751967d906","targetPort":"tap"},{"sourceId":"114d41e7-260c-11b8-3e6a-5fc7673d3da4","sourcePort":"siz","targetId":"8f3d9ac5-0f59-56c1-9de1-40422004db8c","targetPort":"size"},{"sourceId":"51d948b5-68c8-30ca-10d7-fc751967d906","sourcePort":"lap","targetId":"fb271caf-27fd-c43c-b291-374e025a9c04","targetPort":"reset"},{"sourceId":"114d41e7-260c-11b8-3e6a-5fc7673d3da4","sourcePort":"reached-big","targetId":"bdb2e554-c055-b083-9ae3-da84462ff96a","targetPort":"restart"},{"sourceId":"bdb2e554-c055-b083-9ae3-da84462ff96a","sourcePort":"timerFinished","targetId":"114d41e7-260c-11b8-3e6a-5fc7673d3da4","targetPort":"to-small"},{"sourceId":"51d948b5-68c8-30ca-10d7-fc751967d906","sourcePort":"lap","targetId":"894175d4-4ebb-2929-431d-00d2e2c2439e","targetPort":"restart"},{"sourceId":"894175d4-4ebb-2929-431d-00d2e2c2439e","sourcePort":"timerFinished","targetId":"fb271caf-27fd-c43c-b291-374e025a9c04","targetPort":"increase"},{"sourceId":"fb271caf-27fd-c43c-b291-374e025a9c04","sourcePort":"countChanged","targetId":"894175d4-4ebb-2929-431d-00d2e2c2439e","targetPort":"restart"},{"sourceId":"fb271caf-27fd-c43c-b291-374e025a9c04","sourcePort":"countChanged","targetId":"114d41e7-260c-11b8-3e6a-5fc7673d3da4","targetPort":"to-big"},{"sourceId":"29f74ce1-16b0-235e-6fe9-1779c426e0d5","sourcePort":"onClick","targetId":"51d948b5-68c8-30ca-10d7-fc751967d906","targetPort":"level2"},{"sourceId":"ed81d105-df22-6000-00f9-982709b140e3","sourcePort":"onClick","targetId":"51d948b5-68c8-30ca-10d7-fc751967d906","targetPort":"level3"},{"sourceId":"40fb0c0f-a379-147d-c85d-6f949eb25031","sourcePort":"onClick","targetId":"9848c990-03ba-47fe-68d2-201f2da09ee2","targetPort":"connect"},{"sourceId":"1abc2f51-613a-26af-783c-560da81918a0","sourcePort":"onClick","targetId":"51d948b5-68c8-30ca-10d7-fc751967d906","targetPort":"level1"},{"sourceId":"eacc74e7-4dce-2baf-354b-8070e2b2b872","sourcePort":"onClick","targetId":"9848c990-03ba-47fe-68d2-201f2da09ee2","targetPort":"connect"},{"sourceId":"d725f920-458b-600a-2856-04c33c5ac76d","sourcePort":"currentCount","targetId":"40fb0c0f-a379-147d-c85d-6f949eb25031","targetPort":"text"},{"sourceId":"9848c990-03ba-47fe-68d2-201f2da09ee2","sourcePort":"accX","targetId":"e33264cb-8d2c-893e-0d6c-6aab44df2ff9","targetPort":"text"},{"sourceId":"9848c990-03ba-47fe-68d2-201f2da09ee2","sourcePort":"accX","targetId":"590392cf-bf8a-0a96-7bb4-f9af15707e8a","targetPort":"accX"},{"sourceId":"590392cf-bf8a-0a96-7bb4-f9af15707e8a","sourcePort":"count","targetId":"d725f920-458b-600a-2856-04c33c5ac76d","targetPort":"increase"},{"sourceId":"93948317-75a4-fb2e-5950-f61300c49d0d","sourcePort":"applicationLoaded","targetId":"590392cf-bf8a-0a96-7bb4-f9af15707e8a","targetPort":"mySignal"},{"sourceId":"d725f920-458b-600a-2856-04c33c5ac76d","sourcePort":"currentCount","targetId":"0914932c-cf14-6d4b-eec1-331abd1f20a3","targetPort":"num"},{"sourceId":"0914932c-cf14-6d4b-eec1-331abd1f20a3","sourcePort":"result","targetId":"8fd824ac-fa19-3082-084e-587d024d9353","targetPort":"on"},{"sourceId":"8fd824ac-fa19-3082-084e-587d024d9353","sourcePort":"switchedToOn","targetId":"51d948b5-68c8-30ca-10d7-fc751967d906","targetPort":"level1"},{"sourceId":"f90ba713-ff5b-10e3-e20b-0766530a41cf","sourcePort":"result","targetId":"c62ddefa-fd9b-0655-bbe4-f5c77ff5ff93","targetPort":"on"},{"sourceId":"d725f920-458b-600a-2856-04c33c5ac76d","sourcePort":"currentCount","targetId":"f90ba713-ff5b-10e3-e20b-0766530a41cf","targetPort":"num"},{"sourceId":"c62ddefa-fd9b-0655-bbe4-f5c77ff5ff93","sourcePort":"switchedToOn","targetId":"51d948b5-68c8-30ca-10d7-fc751967d906","targetPort":"level2"},{"sourceId":"5f0d6b9a-3c1c-8e4b-6d4a-35ce7228b369","sourcePort":"result","targetId":"274db519-7ede-dc51-b1ff-3ef1edd0f8b5","targetPort":"on"},{"sourceId":"d725f920-458b-600a-2856-04c33c5ac76d","sourcePort":"currentCount","targetId":"5f0d6b9a-3c1c-8e4b-6d4a-35ce7228b369","targetPort":"num"},{"sourceId":"274db519-7ede-dc51-b1ff-3ef1edd0f8b5","sourcePort":"switchedToOn","targetId":"51d948b5-68c8-30ca-10d7-fc751967d906","targetPort":"level3"},{"sourceId":"51d948b5-68c8-30ca-10d7-fc751967d906","sourcePort":"lap","targetId":"a5bb277c-fae4-656e-d650-024866966212","targetPort":"increase"},{"sourceId":"a5bb277c-fae4-656e-d650-024866966212","sourcePort":"currentCount","targetId":"eab09069-373d-3981-0f7c-448205280dd0","targetPort":"count"},{"sourceId":"8f3d9ac5-0f59-56c1-9de1-40422004db8c","sourcePort":"onClick","targetId":"51d948b5-68c8-30ca-10d7-fc751967d906","targetPort":"tap"},{"sourceId":"eacc74e7-4dce-2baf-354b-8070e2b2b872","sourcePort":"onClick","targetId":"81aaf33e-0e4e-5d37-54b1-60c26f27f2d5","targetPort":"play"},{"sourceId":"eab09069-373d-3981-0f7c-448205280dd0","sourcePort":"result","targetId":"81aaf33e-0e4e-5d37-54b1-60c26f27f2d5","targetPort":"play"},{"sourceId":"a5bb277c-fae4-656e-d650-024866966212","sourcePort":"countChanged","targetId":"81aaf33e-0e4e-5d37-54b1-60c26f27f2d5","targetPort":"reset"}],"ports":[],"roots":["eacc74e7-4dce-2baf-354b-8070e2b2b872","502d31cd-13ac-36b0-3c00-0574cae3d2a7","e33264cb-8d2c-893e-0d6c-6aab44df2ff9"]},{"name":"/AccMicrobit","nodes":[{"id":"82a98ee7-7a11-c3f3-69b8-8cb2b9c71c37","type":"Javascript2","parameters":{"code":"    //ボタンサービス\n    const UUID_Button_Service                         = \"E95D9882251D470AA062FA1922DFA9A8\";\n    const UUID_Button_A_Service_CHARACTERISTICS       = \"E95DDA90251D470AA062FA1922DFA9A8\";\n    const UUID_Button_B_Service_CHARACTERISTICS       = \"E95DDA91251D470AA062FA1922DFA9A8\";\n    \n    var accelerometer_device;\n    var accelerometer_characteristic;\n    \n    //micro:bit BLE UUID\n    var ACCELEROMETERSERVICE_SERVICE_UUID       = 'e95d0753-251d-470a-a062-fa1922dfa9a8';\n    var ACCELEROMETERDATA_CHARACTERISTIC_UUID   = 'e95dca4b-251d-470a-a062-fa1922dfa9a8';\n    \n    var accX,accY,accZ;\n    \n    \ndefine({\n\t// The input ports of the Javascript node, name of input and type\n\tinputs:{\n\t    // ExampleInput:'number',\n\t    // Available types are 'number', 'string', 'boolean', 'color' and 'signal',\n\t    connect:'signal',\n\t    disconnect:'signal',\n\t    mySignal:\"signal\"\n\t},\n\t\n\t// The output ports of the Javascript node, name of output and type\n\toutputs:{\n\t    // ExampleOutput:'string',\n\t    accX: \"number\",\n\t    accY: \"number\",\n\t    accZ: \"number\"\n\t},\n\t\n\t// All signal inputs need their own function with the corresponding name that\n\t// will be run when a signal is received on the input.\n\tmySignal:function(inputs,outputs) {\n\t\t// ...\n\t},\n\t\n\t// This function will be called when any of the inputs have changed\n\tchange:function(inputs,outputs) {\n\t\tif(inputs.connect){\n\t\t    connect();\n\t\t}\n\t   \n\n\t\tif(inputs.disconnect){\n\t\t    disconnect();\n\t\t}\n\t\t\n\t\tthis.runNextFrame();\n\t\toutputs.accX = accX;\n\t    this.flagOutputDirty(\"accX\");\n\t    outputs.accY = accY;\n\t    this.flagOutputDirty(\"accY\");\n\t    outputs.accZ = accZ;\n\t    this.flagOutputDirty(\"accZ\");\n\t\t\n\t}\n})\n\nfunction connect() {  \n  navigator.bluetooth.requestDevice({\n    filters: [{\n      namePrefix: 'BBC micro:bit',\n    }],\n    optionalServices: [ACCELEROMETERSERVICE_SERVICE_UUID],\n    \n  })\n  .then(device => {\n    accelerometer_device = device;\n    console.log(\"device\", device);\n    return device.gatt.connect();\n  })\n  //ACCELEROMETER\n  .then(server =>{\n    console.log(\"server\", server)\n    return server.getPrimaryService(ACCELEROMETERSERVICE_SERVICE_UUID);\n  })\n  .then(service => {\n    console.log(\"service\", service)\n    return service.getCharacteristic(ACCELEROMETERDATA_CHARACTERISTIC_UUID)\n  })\n  .then(chara => {\n    console.log(\"ACCELEROMETER:\", chara)\n    console.log(\"BLE接続が完了しました。\");\n    characteristic = chara;\n    characteristic.startNotifications();\n    characteristic.addEventListener('characteristicvaluechanged',onAccelerometerValueChanged);\n    characteristic.writeValue(value);\n  })  \n  .catch(error => {\n    console.log(\"BLE接続に失敗しました。もう一度試してみてください\");\n    console.log(error);\n  });    \n}\n\nfunction onAccelerometerValueChanged(event) {\n    AcceleratorX = event.target.value.getUint16(0)/1000.0;\n    //console.log('x:' + AcceleratorX);\n    // document.js.x.value = AcceleratorX;\n    accX = AcceleratorX;\n    \n    AcceleratorY = event.target.value.getUint16(2)/1000.0;\n    //console.log('y:' + AcceleratorY);\n    // document.js.y.value = AcceleratorY;\n    accY = AcceleratorY;\n\n    AcceleratorZ = event.target.value.getUint16(4)/1000.0;\n    //console.log('z:' + AcceleratorZ);\n    // document.js.z.value = AcceleratorZ;\n    accZ = AcceleratorZ;\n} \n\nfunction disconnect() {\n  if (!accelerometer_device || !accelerometer_device.gatt.connected) return ;\n  accelerometer_device.gatt.disconnect();\n  console.log(\"BLE接続を切断しました。\")\n}\n\n\n","useExternalFile":"no"},"ports":[{"name":"code","type":{"name":"string","allowEditOnly":true,"codeeditor":"javascript"},"plug":"input","group":"Code","displayName":"Code","default":"define({\n\t// The input ports of the Javascript node, name of input and type\n\tinputs:{\n\t    // ExampleInput:'number',\n\t    // Available types are 'number', 'string', 'boolean', 'color' and 'signal',\n\t    mySignal:'signal',\n\t},\n\t\n\t// The output ports of the Javascript node, name of output and type\n\toutputs:{\n\t    // ExampleOutput:'string',\n\t},\n\t\n\t// All signal inputs need their own function with the corresponding name that\n\t// will be run when a signal is received on the input.\n\tmySignal:function(inputs,outputs) {\n\t\t// ...\n\t},\n\t\n\t// This function will be called when any of the inputs have changed\n\tchange:function(inputs,outputs) {\n\t\t// ...\n\t}\n})\n","index":1},{"name":"connect","plug":"input","type":{"name":"signal"},"group":"Inputs","index":2},{"name":"disconnect","plug":"input","type":{"name":"signal"},"group":"Inputs","index":3},{"name":"mySignal","plug":"input","type":{"name":"signal"},"group":"Inputs","index":4},{"name":"accX","type":{"name":"number"},"plug":"output","group":"Outputs","index":5},{"name":"accY","type":{"name":"number"},"plug":"output","group":"Outputs","index":6},{"name":"accZ","type":{"name":"number"},"plug":"output","group":"Outputs","index":7}],"children":[]},{"id":"2de67ec6-db45-7a07-42a5-388fdc814ac6","type":"Component Inputs","parameters":{},"ports":[{"name":"connect","plug":"output","type":{"name":"*"},"index":1},{"name":"disconnect","plug":"output","type":{"name":"*"},"index":2}],"children":[]},{"id":"070def06-cad9-a9d9-be13-3ce7c4d4bc5c","type":"Component Outputs","parameters":{},"ports":[{"name":"accX","plug":"input","type":{"name":"*"},"index":1},{"name":"accY","plug":"input","type":{"name":"*"},"index":2},{"name":"accZ","plug":"input","type":{"name":"*"},"index":3}],"children":[]}],"connections":[{"sourceId":"2de67ec6-db45-7a07-42a5-388fdc814ac6","sourcePort":"connect","targetId":"82a98ee7-7a11-c3f3-69b8-8cb2b9c71c37","targetPort":"connect"},{"sourceId":"2de67ec6-db45-7a07-42a5-388fdc814ac6","sourcePort":"disconnect","targetId":"82a98ee7-7a11-c3f3-69b8-8cb2b9c71c37","targetPort":"disconnect"},{"sourceId":"82a98ee7-7a11-c3f3-69b8-8cb2b9c71c37","sourcePort":"accX","targetId":"070def06-cad9-a9d9-be13-3ce7c4d4bc5c","targetPort":"accX"},{"sourceId":"82a98ee7-7a11-c3f3-69b8-8cb2b9c71c37","sourcePort":"accY","targetId":"070def06-cad9-a9d9-be13-3ce7c4d4bc5c","targetPort":"accY"},{"sourceId":"82a98ee7-7a11-c3f3-69b8-8cb2b9c71c37","sourcePort":"accZ","targetId":"070def06-cad9-a9d9-be13-3ce7c4d4bc5c","targetPort":"accZ"}],"ports":[{"name":"accX","type":{"name":"number"},"plug":"output"},{"name":"accY","type":{"name":"number"},"plug":"output"},{"name":"accZ","type":{"name":"number"},"plug":"output"},{"name":"connect","type":{"name":"signal"},"plug":"input"},{"name":"disconnect","type":{"name":"signal"},"plug":"input"}],"roots":[]},{"name":"/main2","nodes":[{"id":"7f80bd9a-6c38-b93a-df7b-4c9aa1cfdfdb","type":"Group","parameters":{},"ports":[{"name":"width","type":{"name":"number","units":["%","px","vw"],"defaultUnit":"%"},"plug":"input","group":"Dimensions","displayName":"Width","default":"100","index":2},{"name":"height","type":{"name":"number","units":["%","px","vh"],"defaultUnit":"%"},"plug":"input","group":"Dimensions","displayName":"Height","default":"100","index":3},{"name":"borderWidth","type":{"name":"number","units":["px"],"defaultUnit":"px"},"plug":"input","group":"Style","displayName":"Border Width","default":0,"index":353},{"name":"borderColor","type":"color","plug":"input","group":"Style","displayName":"Border Color","index":354}],"children":[{"id":"ec9fe95c-93fa-f000-bf4a-dcb8d1ac49eb","type":"/Main","parameters":{},"ports":[],"children":[]}]}],"connections":[],"ports":[],"roots":["7f80bd9a-6c38-b93a-df7b-4c9aa1cfdfdb"]}],"rootComponent":"/Main","rootNode":"eacc74e7-4dce-2baf-354b-8070e2b2b872","metadata":{"deviceSettings":{"deviceTypes":[{"name":"Web","desc":"This is the default device that can be used to view the app from a browser.","rootComponentPath":"/Main","type":"Browser"},{"name":"music","desc":"","rootComponentPath":"/Main","type":"Browser"}]},"deviceInstances":[{"deviceName":"Web","running":false,"runtime":"Browser"}]}};
</script>



<script src="noodl.js"></script>
</body>
</html>
